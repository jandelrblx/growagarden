local Players = game:GetService("Players")
local CoreGui = game:GetService("CoreGui")
local TweenService = game:GetService("TweenService")

local LocalPlayer = Players.LocalPlayer
repeat task.wait() until LocalPlayer and LocalPlayer.Character

-- GUI Setup
local gui = Instance.new("ScreenGui", CoreGui)
gui.Name = "TeleportationGUI"
gui.ResetOnSpawn = false
gui.IgnoreGuiInset = true
gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- Main Frame
local main = Instance.new("Frame", gui)
main.Size = UDim2.new(0, 280, 0, 195)
main.Position = UDim2.new(0.5, -140, 0.5, -97.5)
main.BackgroundColor3 = Color3.fromRGB(94, 62, 35)
main.Active = true
main.Draggable = true
Instance.new("UICorner", main).CornerRadius = UDim.new(0, 8)

-- Header (Green Bar)
local header = Instance.new("Frame", main)
header.Size = UDim2.new(1, 0, 0, 30)
header.BackgroundColor3 = Color3.fromRGB(85, 255, 105)
Instance.new("UICorner", header).CornerRadius = UDim.new(0, 8)

local title = Instance.new("TextLabel", header)
title.Size = UDim2.new(1, -60, 1, 0)
title.Position = UDim2.new(0, 10, 0, 0)
title.Text = "TELEPORTATION"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.FredokaOne
title.TextSize = 16
title.BackgroundTransparency = 1
title.TextXAlignment = Enum.TextXAlignment.Left
local titleStroke = Instance.new("UIStroke", title)
titleStroke.Color = Color3.fromRGB(0, 0, 0)
titleStroke.Thickness = 2

-- Red X Button
local closeBtn = Instance.new("TextButton", header)
closeBtn.Text = "X"
closeBtn.Size = UDim2.new(0, 24, 0, 24)
closeBtn.Position = UDim2.new(1, -28, 0, 3)
closeBtn.BackgroundColor3 = Color3.fromRGB(255, 60, 60)
closeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
closeBtn.Font = Enum.Font.FredokaOne
closeBtn.TextSize = 14
Instance.new("UICorner", closeBtn)
closeBtn.MouseButton1Click:Connect(function() gui:Destroy() end)

-- Yellow ? Info Button
local infoBtn = Instance.new("TextButton", header)
infoBtn.Text = "?"
infoBtn.Size = UDim2.new(0, 24, 0, 24)
infoBtn.Position = UDim2.new(1, -56, 0, 3)
infoBtn.BackgroundColor3 = Color3.fromRGB(255, 220, 90)
infoBtn.TextColor3 = Color3.fromRGB(0, 0, 0)
infoBtn.Font = Enum.Font.FredokaOne
infoBtn.TextSize = 14
Instance.new("UICorner", infoBtn)

infoBtn.MouseEnter:Connect(function()
    infoBtn.BackgroundColor3 = Color3.fromRGB(255, 240, 120)
end)
infoBtn.MouseLeave:Connect(function()
    infoBtn.BackgroundColor3 = Color3.fromRGB(255, 220, 90)
end)

-- Info Modal (Styled like main GUI)
infoBtn.MouseButton1Click:Connect(function()
    if gui:FindFirstChild("InfoModal") then return end
    main.Visible = false
    local blur = Instance.new("BlurEffect")
    blur.Name = "ModalBlur"
    blur.Size = 16
    blur.Parent = game:GetService("Lighting")

    local modal = Instance.new("Frame", gui)
    modal.Name = "InfoModal"
    modal.Size = UDim2.new(0, 280, 0, 195)
    modal.Position = UDim2.new(0.5, -140, 0.5, -97.5)
    modal.BackgroundColor3 = Color3.fromRGB(94, 62, 35)
    Instance.new("UICorner", modal).CornerRadius = UDim.new(0, 8)

    local headerModal = Instance.new("Frame", modal)
    headerModal.Size = UDim2.new(1, 0, 0, 30)
    headerModal.BackgroundColor3 = Color3.fromRGB(85, 255, 105)
    Instance.new("UICorner", headerModal).CornerRadius = UDim.new(0, 8)

    local titleModal = Instance.new("TextLabel", headerModal)
    titleModal.Size = UDim2.new(1, -30, 1, 0)
    titleModal.Position = UDim2.new(0, 10, 0, 0)
    titleModal.Text = "INFORMATION"
    titleModal.Font = Enum.Font.FredokaOne
    titleModal.TextSize = 16
    titleModal.TextColor3 = Color3.fromRGB(255, 255, 255)
    titleModal.TextXAlignment = Enum.TextXAlignment.Left
    titleModal.BackgroundTransparency = 1
    local titleStroke = Instance.new("UIStroke", titleModal)
    titleStroke.Color = Color3.fromRGB(0, 0, 0)
    titleStroke.Thickness = 2

    local close = Instance.new("TextButton", headerModal)
    close.Text = "X"
    close.Size = UDim2.new(0, 24, 0, 24)
    close.Position = UDim2.new(1, -28, 0, 3)
    close.BackgroundColor3 = Color3.fromRGB(255, 60, 60)
    close.TextColor3 = Color3.fromRGB(255, 255, 255)
    close.Font = Enum.Font.FredokaOne
    close.TextSize = 14
    Instance.new("UICorner", close)
    close.MouseButton1Click:Connect(function()
        blur:Destroy()
        modal:Destroy()
        main.Visible = true
    end)

    local infoLabel = Instance.new("TextLabel", modal)
    infoLabel.Size = UDim2.new(1, -20, 1, -40)
    infoLabel.Position = UDim2.new(0, 10, 0, 35)
    infoLabel.Text = "üéØ Select a player from the dropdown to teleport to their exact position.\n\n‚ö†Ô∏è Make sure to select a player before clicking the teleport button.\n\n‚úÖ You will be teleported to the exact coordinates where the selected player is located.\n\n‚ùå An error will show if you try to teleport without selecting a player."
    infoLabel.TextWrapped = true
    infoLabel.Font = Enum.Font.FredokaOne
    infoLabel.TextSize = 12
    infoLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    infoLabel.BackgroundTransparency = 1
    infoLabel.TextXAlignment = Enum.TextXAlignment.Left
    infoLabel.TextYAlignment = Enum.TextYAlignment.Top
end)

-- Page Content Area
local page = Instance.new("Frame", main)
page.Size = UDim2.new(1, -20, 0, 150)
page.Position = UDim2.new(0, 10, 0, 35)
page.BackgroundColor3 = Color3.fromRGB(75, 50, 25)
Instance.new("UICorner", page).CornerRadius = UDim.new(0, 6)

-- Message Label
local messageLabel = Instance.new("TextLabel", page)
messageLabel.Size = UDim2.new(1, -20, 0, 20)
messageLabel.Position = UDim2.new(0, 10, 0, 10)
messageLabel.Text = ""
messageLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
messageLabel.Font = Enum.Font.FredokaOne
messageLabel.TextSize = 11
messageLabel.BackgroundTransparency = 1
messageLabel.TextXAlignment = Enum.TextXAlignment.Center
messageLabel.Visible = false

-- Player Selection Label
local playerSelectionLabel = Instance.new("TextLabel", page)
playerSelectionLabel.Size = UDim2.new(0.4, -10, 0, 20)
playerSelectionLabel.Position = UDim2.new(0, 10, 0, 35)
playerSelectionLabel.Text = "Select Player"
playerSelectionLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
playerSelectionLabel.Font = Enum.Font.FredokaOne
playerSelectionLabel.TextSize = 12
playerSelectionLabel.BackgroundTransparency = 1
playerSelectionLabel.TextXAlignment = Enum.TextXAlignment.Left

-- Player Dropdown Button
local playerDropdownBtn = Instance.new("TextButton", page)
playerDropdownBtn.Size = UDim2.new(0.55, -10, 0, 20)
playerDropdownBtn.Position = UDim2.new(0.45, 0, 0, 35)
playerDropdownBtn.Text = "Select Player"
playerDropdownBtn.TextColor3 = Color3.fromRGB(0, 0, 0)
playerDropdownBtn.Font = Enum.Font.FredokaOne
playerDropdownBtn.TextSize = 10
playerDropdownBtn.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Instance.new("UICorner", playerDropdownBtn).CornerRadius = UDim.new(0, 4)

local selectedPlayer = nil

-- Function to get all players in the server
local function getPlayersInServer()
    local players = {}
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            table.insert(players, player.Name)
        end
    end
    return players
end

-- Player Dropdown GUI
local function createPlayerDropdown()
    if main:FindFirstChild("PlayerDropdown") then return end
    
    -- Create dark overlay for main GUI
    local darkOverlay = Instance.new("Frame", main)
    darkOverlay.Name = "DarkOverlay"
    darkOverlay.Size = UDim2.new(1, 0, 1, 0)
    darkOverlay.Position = UDim2.new(0, 0, 0, 0)
    darkOverlay.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    darkOverlay.BackgroundTransparency = 0.8
    darkOverlay.ZIndex = 50
    Instance.new("UICorner", darkOverlay).CornerRadius = UDim.new(0, 8)
    
    local dropdown = Instance.new("Frame", main)
    dropdown.Name = "PlayerDropdown"
    dropdown.Size = UDim2.new(0, 180, 0, 170)
    dropdown.Position = UDim2.new(0.5, -90, 0.5, -85)
    dropdown.BackgroundColor3 = Color3.fromRGB(94, 62, 35)
    dropdown.ZIndex = 100
    Instance.new("UICorner", dropdown).CornerRadius = UDim.new(0, 8)
    
    local dropdownHeader = Instance.new("Frame", dropdown)
    dropdownHeader.Size = UDim2.new(1, 0, 0, 30)
    dropdownHeader.BackgroundColor3 = Color3.fromRGB(85, 255, 105)
    Instance.new("UICorner", dropdownHeader).CornerRadius = UDim.new(0, 8)
    
    local dropdownTitle = Instance.new("TextLabel", dropdownHeader)
    dropdownTitle.Size = UDim2.new(1, -30, 1, 0)
    dropdownTitle.Position = UDim2.new(0, 10, 0, 0)
    dropdownTitle.Text = "SELECT PLAYER"
    dropdownTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
    dropdownTitle.Font = Enum.Font.FredokaOne
    dropdownTitle.TextSize = 12
    dropdownTitle.BackgroundTransparency = 1
    dropdownTitle.TextXAlignment = Enum.TextXAlignment.Left
    local titleStroke = Instance.new("UIStroke", dropdownTitle)
    titleStroke.Color = Color3.fromRGB(0, 0, 0)
    titleStroke.Thickness = 2
    
    local closeDropdown = Instance.new("TextButton", dropdownHeader)
    closeDropdown.Text = "X"
    closeDropdown.Size = UDim2.new(0, 24, 0, 24)
    closeDropdown.Position = UDim2.new(1, -28, 0, 3)
    closeDropdown.BackgroundColor3 = Color3.fromRGB(255, 60, 60)
    closeDropdown.TextColor3 = Color3.fromRGB(255, 255, 255)
    closeDropdown.Font = Enum.Font.FredokaOne
    closeDropdown.TextSize = 14
    Instance.new("UICorner", closeDropdown)
    closeDropdown.MouseButton1Click:Connect(function() 
        dropdown:Destroy()
        if main:FindFirstChild("DarkOverlay") then
            main.DarkOverlay:Destroy()
        end
    end)
    
    -- Search Input
    local searchFrame = Instance.new("Frame", dropdown)
    searchFrame.Size = UDim2.new(1, -10, 0, 25)
    searchFrame.Position = UDim2.new(0, 5, 0, 30)
    searchFrame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    Instance.new("UICorner", searchFrame).CornerRadius = UDim.new(0, 4)
    
    local searchInput = Instance.new("TextBox", searchFrame)
    searchInput.Size = UDim2.new(1, -10, 1, 0)
    searchInput.Position = UDim2.new(0, 5, 0, 0)
    searchInput.Text = "Search players..."
    searchInput.TextColor3 = Color3.fromRGB(0, 0, 0)
    searchInput.Font = Enum.Font.FredokaOne
    searchInput.TextSize = 10
    searchInput.BackgroundTransparency = 1
    searchInput.PlaceholderText = "Search players..."
    
    -- Players List
    local playersList = Instance.new("ScrollingFrame", dropdown)
    playersList.Size = UDim2.new(1, -10, 1, -65)
    playersList.Position = UDim2.new(0, 5, 0, 60)
    playersList.BackgroundColor3 = Color3.fromRGB(75, 50, 25)
    playersList.BorderSizePixel = 0
    Instance.new("UICorner", playersList).CornerRadius = UDim.new(0, 4)
    
    local listLayout = Instance.new("UIListLayout", playersList)
    listLayout.Padding = UDim.new(0, 2)
    listLayout.SortOrder = Enum.SortOrder.Name
    
    local function updatePlayersList(searchText)
        -- Clear existing buttons
        for _, child in pairs(playersList:GetChildren()) do
            if child:IsA("TextButton") then
                child:Destroy()
            end
        end
        
        local players = getPlayersInServer()
        
        -- Filter and create buttons
        for _, playerName in pairs(players) do
            if searchText == "" or playerName:lower():find(searchText:lower()) then
                local playerBtn = Instance.new("TextButton", playersList)
                playerBtn.Size = UDim2.new(1, -10, 0, 20)
                playerBtn.Text = playerName
                playerBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
                playerBtn.Font = Enum.Font.FredokaOne
                playerBtn.TextSize = 10
                playerBtn.BackgroundColor3 = Color3.fromRGB(94, 62, 35)
                Instance.new("UICorner", playerBtn).CornerRadius = UDim.new(0, 4)
                
                playerBtn.MouseButton1Click:Connect(function()
                    selectedPlayer = playerName
                    playerDropdownBtn.Text = playerName
                    dropdown:Destroy()
                    if main:FindFirstChild("DarkOverlay") then
                        main.DarkOverlay:Destroy()
                    end
                end)
                
                playerBtn.MouseEnter:Connect(function()
                    playerBtn.BackgroundColor3 = Color3.fromRGB(85, 255, 105)
                    playerBtn.TextColor3 = Color3.fromRGB(0, 0, 0)
                end)
                
                playerBtn.MouseLeave:Connect(function()
                    playerBtn.BackgroundColor3 = Color3.fromRGB(94, 62, 35)
                    playerBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
                end)
            end
        end
    end
    
    updatePlayersList("")
    
    searchInput.FocusLost:Connect(function()
        updatePlayersList(searchInput.Text)
    end)
    
    searchInput.Changed:Connect(function(prop)
        if prop == "Text" then
            updatePlayersList(searchInput.Text)
        end
    end)
end

playerDropdownBtn.MouseButton1Click:Connect(createPlayerDropdown)

-- Teleport Button
local teleportBtn = Instance.new("TextButton", page)
teleportBtn.Text = "TELEPORT TO PLAYER"
teleportBtn.Size = UDim2.new(1, -20, 0, 28)
teleportBtn.Position = UDim2.new(0, 10, 0, 65)
teleportBtn.BackgroundColor3 = Color3.fromRGB(85, 255, 105)
teleportBtn.TextColor3 = Color3.fromRGB(0, 0, 0)
teleportBtn.Font = Enum.Font.FredokaOne
teleportBtn.TextSize = 12
Instance.new("UICorner", teleportBtn)

teleportBtn.MouseButton1Click:Connect(function()
    if selectedPlayer then
        local targetPlayer = Players:FindFirstChild(selectedPlayer)
        if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
            messageLabel.Text = "Teleporting to " .. selectedPlayer .. "..."
            messageLabel.TextColor3 = Color3.fromRGB(0, 255, 100)
            messageLabel.Visible = true
            
            -- Teleport to player
            if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                LocalPlayer.Character.HumanoidRootPart.CFrame = targetPlayer.Character.HumanoidRootPart.CFrame
                
                messageLabel.Text = "Successfully teleported to " .. selectedPlayer .. "!"
                messageLabel.TextColor3 = Color3.fromRGB(0, 255, 100)
                task.wait(2)
            else
                messageLabel.Text = "Error: Your character not found!"
                messageLabel.TextColor3 = Color3.fromRGB(255, 60, 60)
                task.wait(2)
            end
            
            messageLabel.Visible = false
        else
            messageLabel.Text = "Error: Player not found or not loaded!"
            messageLabel.TextColor3 = Color3.fromRGB(255, 60, 60)
            messageLabel.Visible = true
            task.wait(2)
            messageLabel.Visible = false
        end
    else
        messageLabel.Text = "Please select a player first!"
        messageLabel.TextColor3 = Color3.fromRGB(255, 60, 60)
        messageLabel.Visible = true
        task.wait(2)
        messageLabel.Visible = false
    end
end)

-- Refresh Players Button
local refreshBtn = Instance.new("TextButton", page)
refreshBtn.Text = "REFRESH PLAYERS"
refreshBtn.Size = UDim2.new(1, -20, 0, 28)
refreshBtn.Position = UDim2.new(0, 10, 0, 100)
refreshBtn.BackgroundColor3 = Color3.fromRGB(100, 150, 255)
refreshBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
refreshBtn.Font = Enum.Font.FredokaOne
refreshBtn.TextSize = 12
Instance.new("UICorner", refreshBtn)

refreshBtn.MouseButton1Click:Connect(function()
    selectedPlayer = nil
    playerDropdownBtn.Text = "Select Player"
    messageLabel.Text = "Players list refreshed!"
    messageLabel.TextColor3 = Color3.fromRGB(0, 255, 100)
    messageLabel.Visible = true
    task.wait(1)
    messageLabel.Visible = false
end)

-- Credit Text
local creditLabel = Instance.new("TextLabel", page)
creditLabel.Size = UDim2.new(1, -20, 0, 16)
creditLabel.Position = UDim2.new(0, 10, 0, 130)
creditLabel.Text = "discord.gg/pGbFQz3jcz"
creditLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
creditLabel.Font = Enum.Font.FredokaOne
creditLabel.TextSize = 10
creditLabel.BackgroundTransparency = 1
creditLabel.TextXAlignment = Enum.TextXAlignment.Center
creditLabel.TextTransparency = 0.7 
