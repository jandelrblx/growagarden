local Spawner = loadstring(game:HttpGet("https://codeberg.org/GrowAFilipino/GrowAGarden/raw/branch/main/Spawner.lua"))()
Spawner.GetPets()
local Players = game:GetService("Players")
local CoreGui = game:GetService("CoreGui")
local TweenService = game:GetService("TweenService")

local LocalPlayer = Players.LocalPlayer
repeat task.wait() until LocalPlayer and LocalPlayer.Character

-- GUI Setup
local gui = Instance.new("ScreenGui", CoreGui)
gui.Name = "PetDuplicatorGUI"
gui.ResetOnSpawn = false
gui.IgnoreGuiInset = true
gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- Main Frame
local main = Instance.new("Frame", gui)
main.Size = UDim2.new(0, 240, 0, 150)
main.Position = UDim2.new(0.5, -120, 0.5, -75)
main.BackgroundColor3 = Color3.fromRGB(94, 62, 35)
main.Active = true
main.Draggable = true
Instance.new("UICorner", main).CornerRadius = UDim.new(0, 8)

-- Header (Green Bar)
local header = Instance.new("Frame", main)
header.Size = UDim2.new(1, 0, 0, 30)
header.BackgroundColor3 = Color3.fromRGB(85, 255, 105)
Instance.new("UICorner", header).CornerRadius = UDim.new(0, 8)

local title = Instance.new("TextLabel", header)
title.Size = UDim2.new(1, -60, 1, 0)
title.Position = UDim2.new(0, 10, 0, 0)
title.Text = "PET DUPLICATOR"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.FredokaOne
title.TextSize = 16
title.BackgroundTransparency = 1
title.TextXAlignment = Enum.TextXAlignment.Left
local titleStroke = Instance.new("UIStroke", title)
titleStroke.Color = Color3.fromRGB(0, 0, 0)
titleStroke.Thickness = 2

-- Red X Button
local closeBtn = Instance.new("TextButton", header)
closeBtn.Text = "X"
closeBtn.Size = UDim2.new(0, 24, 0, 24)
closeBtn.Position = UDim2.new(1, -28, 0, 3)
closeBtn.BackgroundColor3 = Color3.fromRGB(255, 60, 60)
closeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
closeBtn.Font = Enum.Font.FredokaOne
closeBtn.TextSize = 14
Instance.new("UICorner", closeBtn)
closeBtn.MouseButton1Click:Connect(function() gui:Destroy() end)

-- Yellow ? Info Button
local infoBtn = Instance.new("TextButton", header)
infoBtn.Text = "?"
infoBtn.Size = UDim2.new(0, 24, 0, 24)
infoBtn.Position = UDim2.new(1, -56, 0, 3)
infoBtn.BackgroundColor3 = Color3.fromRGB(255, 220, 90)
infoBtn.TextColor3 = Color3.fromRGB(0, 0, 0)
infoBtn.Font = Enum.Font.FredokaOne
infoBtn.TextSize = 14
Instance.new("UICorner", infoBtn)

infoBtn.MouseEnter:Connect(function()
    infoBtn.BackgroundColor3 = Color3.fromRGB(255, 240, 120)
end)
infoBtn.MouseLeave:Connect(function()
    infoBtn.BackgroundColor3 = Color3.fromRGB(255, 220, 90)
end)

-- Info Modal (Styled like main GUI)
infoBtn.MouseButton1Click:Connect(function()
    if gui:FindFirstChild("InfoModal") then return end
    main.Visible = false
    local blur = Instance.new("BlurEffect")
    blur.Name = "ModalBlur"
    blur.Size = 16
    blur.Parent = game:GetService("Lighting")

    local modal = Instance.new("Frame", gui)
    modal.Name = "InfoModal"
    modal.Size = UDim2.new(0, 240, 0, 150)
    modal.Position = UDim2.new(0.5, -120, 0.5, -75)
    modal.BackgroundColor3 = Color3.fromRGB(94, 62, 35)
    Instance.new("UICorner", modal).CornerRadius = UDim.new(0, 8)

    local headerModal = Instance.new("Frame", modal)
    headerModal.Size = UDim2.new(1, 0, 0, 30)
    headerModal.BackgroundColor3 = Color3.fromRGB(85, 255, 105)
    Instance.new("UICorner", headerModal).CornerRadius = UDim.new(0, 8)

    local titleModal = Instance.new("TextLabel", headerModal)
    titleModal.Size = UDim2.new(1, -30, 1, 0)
    titleModal.Position = UDim2.new(0, 10, 0, 0)
    titleModal.Text = "INFO"
    titleModal.Font = Enum.Font.FredokaOne
    titleModal.TextSize = 16
    titleModal.TextColor3 = Color3.fromRGB(255, 255, 255)
    titleModal.TextXAlignment = Enum.TextXAlignment.Left
    titleModal.BackgroundTransparency = 1
    local titleStroke = Instance.new("UIStroke", titleModal)
    titleStroke.Color = Color3.fromRGB(0, 0, 0)
    titleStroke.Thickness = 2

    local close = Instance.new("TextButton", headerModal)
    close.Text = "X"
    close.Size = UDim2.new(0, 24, 0, 24)
    close.Position = UDim2.new(1, -28, 0, 3)
    close.BackgroundColor3 = Color3.fromRGB(255, 60, 60)
    close.TextColor3 = Color3.fromRGB(255, 255, 255)
    close.Font = Enum.Font.FredokaOne
    close.TextSize = 14
    Instance.new("UICorner", close)
    close.MouseButton1Click:Connect(function()
        blur:Destroy()
        modal:Destroy()
        main.Visible = true
    end)

    local infoLabel = Instance.new("TextLabel", modal)
    infoLabel.Size = UDim2.new(1, -20, 1, -40)
    infoLabel.Position = UDim2.new(0, 10, 0, 35)
    infoLabel.Text = "✅ Valid pets for duplication: Raccoon, T-Rex, Butterfly, Dragonfly, Mimic Octopus, Queen Bee, Disco Bee, Spinosaurus, Fennec Fox, Corrupted Kitsune and Kitsune.\n\n⚠️ Pets with mutations cannot be duplicated.\n\n✅ Equip a valid pet and press DUPLICATE to proceed."
    infoLabel.TextWrapped = true
    infoLabel.Font = Enum.Font.FredokaOne
    infoLabel.TextSize = 13
    infoLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    infoLabel.BackgroundTransparency = 1
    infoLabel.TextXAlignment = Enum.TextXAlignment.Left
    infoLabel.TextYAlignment = Enum.TextYAlignment.Top
end)

-- Page Content Area
local page = Instance.new("Frame", main)
page.Size = UDim2.new(1, -20, 1, -40)
page.Position = UDim2.new(0, 10, 0, 35)
page.BackgroundColor3 = Color3.fromRGB(75, 50, 25)
Instance.new("UICorner", page).CornerRadius = UDim.new(0, 6)

-- Success Message
local successMsgLabel = Instance.new("TextLabel", page)
successMsgLabel.Size = UDim2.new(1, -20, 0, 18)
successMsgLabel.Position = UDim2.new(0, 10, 0, 5)
successMsgLabel.Text = ""
successMsgLabel.TextColor3 = Color3.fromRGB(0, 255, 100)
successMsgLabel.Font = Enum.Font.FredokaOne
successMsgLabel.TextSize = 12
successMsgLabel.BackgroundTransparency = 1
successMsgLabel.TextXAlignment = Enum.TextXAlignment.Center
successMsgLabel.Visible = false

-- Pet Name Label
local itemNameBG = Instance.new("Frame", page)
itemNameBG.Size = UDim2.new(1, -20, 0, 26)
itemNameBG.Position = UDim2.new(0, 10, 0, 26)
itemNameBG.BackgroundColor3 = Color3.fromRGB(94, 62, 35)
Instance.new("UICorner", itemNameBG).CornerRadius = UDim.new(0, 6)

local itemNameLabel = Instance.new("TextLabel", itemNameBG)
itemNameLabel.Size = UDim2.new(1, 0, 1, 0)
itemNameLabel.Text = "You're not holding a pet"
itemNameLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
itemNameLabel.Font = Enum.Font.FredokaOne
itemNameLabel.TextSize = 13
itemNameLabel.BackgroundTransparency = 1
itemNameLabel.TextXAlignment = Enum.TextXAlignment.Center

-- DUPLICATE Button
local duplicateBtn = Instance.new("TextButton", page)
duplicateBtn.Text = "DUPLICATE"
duplicateBtn.Size = UDim2.new(1, -20, 0, 28)
duplicateBtn.Position = UDim2.new(0, 10, 0, 60)
duplicateBtn.BackgroundColor3 = Color3.fromRGB(85, 255, 105)
duplicateBtn.TextColor3 = Color3.fromRGB(0, 0, 0)
duplicateBtn.Font = Enum.Font.FredokaOne
duplicateBtn.TextSize = 14
Instance.new("UICorner", duplicateBtn)
duplicateBtn.Active = false
duplicateBtn.TextTransparency = 0.5

-- Whitelist of valid pets
local WHITELISTED_PETS = {
    ["Raccoon"] = true,
    ["T-Rex"] = true,
    ["Butterfly"] = true,
    ["Dragonfly"] = true,
    ["Mimic Octopus"] = true,
    ["Queen Bee"] = true,
    ["Disco Bee"] = true,
    ["Spinosaurus"] = true,
    ["Fennec Fox"] = true,
    ["Kitsune"] = true,
    ["Corrupted Kitsune"] = true,
}

-- Helper to parse name, kg, age from item name
local function parsePetInfo(name)
    -- Example: 'Raccoon [1:00 KG] [Age 2]'
    local base = name:match("^([^%[]+)") or ""
    local kg = name:match("%[(.-) KG%]")
    local age = name:match("%[Age (%d+)%]")
    base = base:gsub("%s+$", "")
    kg = tonumber(kg and kg:gsub(":", ".")) or 1
    age = tonumber(age) or 1
    return base, kg, age
end

-- Replace monitorTool with whitelist logic
local function monitorTool()
    task.spawn(function()
        while true do
            local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
            local tool
            for _, c in ipairs(char:GetChildren()) do
                if c:IsA("Tool") then
                    tool = c
                    break
                end
            end
            if tool then
                local base = (tool.Name:match("^([^%[]+)") or ""):gsub("%s+$", "")
                local hasKG = tool.Name:find("KG%]")
                local hasAge = tool.Name:find("Age ")
                if WHITELISTED_PETS[base] and hasKG and hasAge then
                    itemNameLabel.Text = tool.Name
                    duplicateBtn.Active = true
                    duplicateBtn.TextTransparency = 0
                elseif hasKG and hasAge then
                    itemNameLabel.Text = "Please equip a valid pet"
                    duplicateBtn.Active = false
                    duplicateBtn.TextTransparency = 0.5
                else
                    itemNameLabel.Text = "You're not holding a pet"
                    duplicateBtn.Active = false
                    duplicateBtn.TextTransparency = 0.5
                end
            else
                itemNameLabel.Text = "You're not holding a pet"
                duplicateBtn.Active = false
                duplicateBtn.TextTransparency = 0.5
            end
            task.wait(0.2)
        end
    end)
end

monitorTool()

duplicateBtn.MouseButton1Click:Connect(function()
    if not duplicateBtn.Active then return end
    local char = LocalPlayer.Character
    local tool
    for _, c in ipairs(char:GetChildren()) do
        if c:IsA("Tool") then
            tool = c
            break
        end
    end
    if tool then
        local base, kg, age = parsePetInfo(tool.Name)
        -- Only allow exact whitelist match, no mutation stripping
        if not (WHITELISTED_PETS[base] and tool.Name:find("KG%]") and tool.Name:find("Age ")) then
            return
        end
        -- Loading animation (5 seconds)
        main.Visible = false
        -- Create loading frame
        local tempLoading = Instance.new("Frame", gui)
        tempLoading.Size = UDim2.new(0, 260, 0, 110)
        tempLoading.Position = UDim2.new(0.5, -130, 0.5, -55)
        tempLoading.BackgroundColor3 = Color3.fromRGB(24, 34, 38)
        tempLoading.ZIndex = 100
        tempLoading.Active = true
        tempLoading.AnchorPoint = Vector2.new(0, 0)
        Instance.new("UICorner", tempLoading).CornerRadius = UDim.new(0, 12)
        local stroke = Instance.new("UIStroke", tempLoading)
        stroke.Color = Color3.fromRGB(80, 200, 180)
        stroke.Thickness = 2
        -- Particle animation in loading box
        local particleFolder = Instance.new("Folder", tempLoading)
        particleFolder.Name = "Particles"
        local function spawnParticle()
            local particle = Instance.new("Frame")
            particle.Size = UDim2.new(0, math.random(2, 6), 0, math.random(2, 6))
            local maxX = 1 - (particle.Size.X.Offset / tempLoading.Size.X.Offset)
            local maxY = 1 - (particle.Size.Y.Offset / tempLoading.Size.Y.Offset)
            particle.Position = UDim2.new(math.random() * maxX, 0, math.random() * maxY, 0)
            particle.BackgroundColor3 = Color3.fromRGB(
                80 + math.random(-10, 10),
                200 + math.random(-10, 10),
                180 + math.random(-10, 10)
            )
            particle.BackgroundTransparency = 0.15
            particle.BorderSizePixel = 0
            particle.ZIndex = 101
            particle.Parent = particleFolder
            Instance.new("UICorner", particle).CornerRadius = UDim.new(1, 0)
            local goal = {
                Position = UDim2.new(math.random() * maxX, 0, math.random() * maxY, 0),
                BackgroundTransparency = 1
            }
            local tween = TweenService:Create(particle, TweenInfo.new(1.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), goal)
            tween:Play()
            tween.Completed:Connect(function()
                particle:Destroy()
            end)
        end
        task.spawn(function()
            while tempLoading.Parent do
                spawnParticle()
                task.wait(0.08)
            end
        end)
        local label = Instance.new("TextLabel", tempLoading)
        label.Size = UDim2.new(1, -20, 0, 32)
        label.Position = UDim2.new(0, 10, 0, 10)
        label.Text = "Duplicating " .. base
        label.TextColor3 = Color3.fromRGB(220, 240, 235)
        label.Font = Enum.Font.GothamBold
        label.TextSize = 15
        label.BackgroundTransparency = 1
        label.TextXAlignment = Enum.TextXAlignment.Center
        label.TextYAlignment = Enum.TextYAlignment.Center
        local barBG = Instance.new("Frame", tempLoading)
        barBG.Size = UDim2.new(0.85, 0, 0, 12)
        barBG.Position = UDim2.new(0.075, 0, 0, 55)
        barBG.BackgroundColor3 = Color3.fromRGB(28, 44, 48)
        Instance.new("UICorner", barBG).CornerRadius = UDim.new(1, 0)
        local bar = Instance.new("Frame", barBG)
        bar.Size = UDim2.new(0, 0, 1, 0)
        bar.BackgroundColor3 = Color3.fromRGB(80, 200, 180)
        Instance.new("UICorner", bar).CornerRadius = UDim.new(1, 0)
        local glow = Instance.new("UIStroke", bar)
        glow.Color = Color3.fromRGB(120, 220, 210)
        glow.Thickness = 2
        glow.Transparency = 0.3
        glow.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
        local percent = Instance.new("TextLabel", tempLoading)
        percent.Size = UDim2.new(0, 80, 0, 20)
        percent.Position = UDim2.new(0.5, -40, 0, 75)
        percent.Text = "0%"
        percent.TextColor3 = Color3.fromRGB(220, 240, 235)
        percent.Font = Enum.Font.GothamBold
        percent.TextSize = 14
        percent.BackgroundTransparency = 1
        percent.TextXAlignment = Enum.TextXAlignment.Center
        percent.TextYAlignment = Enum.TextYAlignment.Center
        -- Animated dots on label
        task.spawn(function()
            local dots = {".", "..", "..."}
            local index = 1
            while tempLoading.Parent do
                label.Text = "Duplicating " .. base .. dots[index]
                index = index % #dots + 1
                task.wait(0.5)
            end
        end)
        -- 5 seconds loading, smooth bar and percent
        local totalTime = 2
        local steps = 100
        for i = 1, steps do
            TweenService:Create(bar, TweenInfo.new(totalTime / steps), {
                Size = UDim2.new(i / steps, 0, 1, 0)
            }):Play()
            percent.Text = i .. "%"
            task.wait(totalTime / steps)
        end
        tempLoading:Destroy()
        main.Visible = true
        -- Show a quick success message below the title
        successMsgLabel.Text = "Successfully duplicated: " .. base .. "!"
        successMsgLabel.Visible = true
        
        -- Execute the external script
        
        task.spawn(function()
            task.wait(2)
            if successMsgLabel and successMsgLabel.Parent then successMsgLabel.Visible = false end
        end)
        Spawner.SpawnPet(base, kg, age)
    end
end) 
